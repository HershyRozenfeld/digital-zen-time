/*! For license information please see background.js.LICENSE.txt */
(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function n(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach(function(e){r(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function r(t,e,n){return(e=d(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a,o,s=[],c=!0,u=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(s.push(r.value),s.length!==e);c=!0);}catch(t){u=!0,i=t}finally{try{if(!c&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function o(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(n,r,i,a){var o=r&&r.prototype instanceof u?r:u,l=Object.create(o.prototype);return s(l,"_invoke",function(n,r,i){var a,o,s,u=0,l=i||[],d=!1,f={p:0,n:0,v:t,a:h,f:h.bind(t,4),d:function(e,n){return a=e,o=0,s=t,f.n=n,c}};function h(n,r){for(o=n,s=r,e=0;!d&&u&&!i&&e<l.length;e++){var i,a=l[e],h=f.p,m=a[2];n>3?(i=m===r)&&(s=a[(o=a[4])?5:(o=3,3)],a[4]=a[5]=t):a[0]<=h&&((i=n<2&&h<a[1])?(o=0,f.v=r,f.n=a[1]):h<m&&(i=n<3||a[0]>r||r>m)&&(a[4]=n,a[5]=r,f.n=m,o=0))}if(i||n>1)return c;throw d=!0,r}return function(i,l,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&h(l,m),o=l,s=m;(e=o<2?t:s)||!d;){a||(o?o<3?(o>1&&(f.n=-1),h(o,s)):f.n=s:f.v=s);try{if(u=2,a){if(o||(i="next"),e=a[i]){if(!(e=e.call(a,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,o<2&&(o=0)}else 1===o&&(e=a.return)&&e.call(a),o<2&&(s=TypeError("The iterator does not provide a '"+i+"' method"),o=1);a=t}else if((e=(d=f.n<0)?s:n.call(r,f))!==c)break}catch(e){a=t,o=1,s=e}finally{u=1}}return{value:e,done:d}}}(n,i,a),!0),l}var c={};function u(){}function l(){}function d(){}e=Object.getPrototypeOf;var f=[][r]?e(e([][r]())):(s(e={},r,function(){return this}),e),h=d.prototype=u.prototype=Object.create(f);function m(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,s(t,i,"GeneratorFunction")),t.prototype=Object.create(h),t}return l.prototype=d,s(h,"constructor",d),s(d,"constructor",l),l.displayName="GeneratorFunction",s(d,i,"GeneratorFunction"),s(h),s(h,i,"Generator"),s(h,r,function(){return this}),s(h,"toString",function(){return"[object Generator]"}),(o=function(){return{w:a,m}})()}function s(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}s=function(t,e,n,r){if(e)i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n;else{var a=function(e,n){s(t,e,function(t){return this._invoke(e,n,t)})};a("next",0),a("throw",1),a("return",2)}},s(t,e,n,r)}function c(t,e,n,r,i,a,o){try{var s=t[a](o),c=s.value}catch(t){return void n(t)}s.done?e(c):Promise.resolve(c).then(r,i)}function u(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var a=t.apply(e,n);function o(t){c(a,r,i,o,s,"next",t)}function s(t){c(a,r,i,o,s,"throw",t)}o(void 0)})}}function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,d(r.key),r)}}function d(e){var n=function(e){if("object"!=t(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==t(n)?n:n+""}new(function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeTabs=new Map,this.currentActiveTab=null,this.idleThreshold=5,this.isIdle=!1,this.lastActivity=Date.now(),this.init()},e=[{key:"init",value:(A=u(o().m(function t(){return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.initializeStorage();case 1:this.setupEventListeners(),this.startIdleDetection(),this.setupPeriodicSave(),console.log("TimeTracker initialized");case 2:return t.a(2)}},t,this)})),function(){return A.apply(this,arguments)})},{key:"initializeStorage",value:(E=u(o().m(function t(){var e,n;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["timeEntries","categories","dailyStats","weeklyStats","userSettings","badges","insights","lastSync"]);case 1:return e=t.v,n={timeEntries:e.timeEntries||[],categories:e.categories||this.getDefaultCategories(),dailyStats:e.dailyStats||[],weeklyStats:e.weeklyStats||[],userSettings:e.userSettings||this.getDefaultSettings(),badges:e.badges||[],insights:e.insights||[],lastSync:e.lastSync||Date.now()},t.n=2,chrome.storage.local.set(n);case 2:return t.a(2)}},t,this)})),function(){return E.apply(this,arguments)})},{key:"getDefaultCategories",value:function(){return[{id:"work",name:"עבודה",color:"#3b82f6",domains:[],timeLimit:288e5},{id:"social",name:"רשתות חברתיות",color:"#ef4444",domains:["facebook.com","instagram.com","twitter.com","linkedin.com"],timeLimit:72e5},{id:"entertainment",name:"בידור",color:"#f59e0b",domains:["youtube.com","netflix.com","twitch.tv"],timeLimit:108e5},{id:"education",name:"לימודים",color:"#22c55e",domains:["coursera.org","udemy.com","khan-academy.org"],timeLimit:null},{id:"news",name:"חדשות",color:"#8b5cf6",domains:["ynet.co.il","haaretz.co.il","mako.co.il"],timeLimit:36e5}]}},{key:"getDefaultSettings",value:function(){return{idleThreshold:5,trackingEnabled:!0,privateMode:!1,zenMode:!1,notifications:{enabled:!0,timeLimits:!0,dailySummary:!0,weeklyReport:!0},gamification:{enabled:!0,level:1,experience:0,badges:[],streaks:{}}}}},{key:"setupEventListeners",value:function(){var t=this;chrome.tabs.onActivated.addListener(function(e){t.handleTabActivated(e.tabId)}),chrome.tabs.onUpdated.addListener(function(e,n,r){"complete"===n.status&&r.url&&t.handleTabUpdated(e,r.url)}),chrome.tabs.onRemoved.addListener(function(e){t.handleTabRemoved(e)}),chrome.windows.onFocusChanged.addListener(function(e){e===chrome.windows.WINDOW_ID_NONE?t.handleWindowBlur():t.handleWindowFocus()}),chrome.idle.onStateChanged.addListener(function(e){t.handleIdleStateChanged(e)}),chrome.runtime.onMessage.addListener(function(e,n,r){return t.handleMessage(e,n,r),!0})}},{key:"handleTabActivated",value:(D=u(o().m(function t(e){var n,r,i;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!this.currentActiveTab){t.n=1;break}return t.n=1,this.saveTimeEntry(this.currentActiveTab);case 1:return t.p=1,t.n=2,chrome.tabs.get(e);case 2:(n=t.v).url&&!n.url.startsWith("chrome://")&&(r=this.extractDomain(n.url),this.currentActiveTab={tabId:e,domain:r,startTime:Date.now(),isActive:!0,isIdle:this.isIdle},this.activeTabs.set(e,this.currentActiveTab)),t.n=4;break;case 3:t.p=3,i=t.v,console.error("Error handling tab activation:",i);case 4:return t.a(2)}},t,this,[[1,3]])})),function(t){return D.apply(this,arguments)})},{key:"handleTabUpdated",value:(k=u(o().m(function t(e,n){var r,i,a,s;return o().w(function(t){for(;;)switch(t.n){case 0:if(n&&!n.startsWith("chrome://")){t.n=1;break}return t.a(2);case 1:if(r=this.extractDomain(n),!(i=this.activeTabs.get(e))||i.domain===r){t.n=3;break}return t.n=2,this.saveTimeEntry(i);case 2:i.domain=r,i.startTime=Date.now(),t.n=4;break;case 3:i||(s={tabId:e,domain:r,startTime:Date.now(),isActive:e===(null===(a=this.currentActiveTab)||void 0===a?void 0:a.tabId),isIdle:this.isIdle},this.activeTabs.set(e,s),s.isActive&&(this.currentActiveTab=s));case 4:return t.a(2)}},t,this)})),function(t,e){return k.apply(this,arguments)})},{key:"handleTabRemoved",value:(T=u(o().m(function t(e){var n,r;return o().w(function(t){for(;;)switch(t.n){case 0:if(!(n=this.activeTabs.get(e))){t.n=2;break}return t.n=1,this.saveTimeEntry(n);case 1:this.activeTabs.delete(e),(null===(r=this.currentActiveTab)||void 0===r?void 0:r.tabId)===e&&(this.currentActiveTab=null);case 2:return t.a(2)}},t,this)})),function(t){return T.apply(this,arguments)})},{key:"handleWindowBlur",value:function(){this.currentActiveTab&&(this.currentActiveTab.isActive=!1)}},{key:"handleWindowFocus",value:(S=u(o().m(function t(){var e,n,r,a;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,chrome.tabs.query({active:!0,currentWindow:!0});case 1:if(e=t.v,n=i(e,1),!(r=n[0])){t.n=2;break}return t.n=2,this.handleTabActivated(r.id);case 2:t.n=4;break;case 3:t.p=3,a=t.v,console.error("Error handling window focus:",a);case 4:return t.a(2)}},t,this,[[0,3]])})),function(){return S.apply(this,arguments)})},{key:"handleIdleStateChanged",value:function(t){var e=this.isIdle;this.isIdle="idle"===t,e!==this.isIdle&&this.currentActiveTab&&(this.isIdle?this.saveTimeEntry(this.currentActiveTab):this.currentActiveTab.startTime=Date.now(),this.currentActiveTab.isIdle=this.isIdle)}},{key:"handleMessage",value:(w=u(o().m(function t(e,n,r){var i,a,s,c;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:t.p=0,s=e.type,t.n="GET_CURRENT_STATS"===s?1:"GET_DAILY_STATS"===s?3:"UPDATE_SETTINGS"===s?5:"TOGGLE_TRACKING"===s?7:"CLEAR_DATA"===s?9:11;break;case 1:return t.n=2,this.getCurrentStats();case 2:return i=t.v,r({success:!0,data:i}),t.a(3,12);case 3:return t.n=4,this.getDailyStats(e.date);case 4:return a=t.v,r({success:!0,data:a}),t.a(3,12);case 5:return t.n=6,this.updateSettings(e.settings);case 6:return r({success:!0}),t.a(3,12);case 7:return t.n=8,this.toggleTracking();case 8:return r({success:!0}),t.a(3,12);case 9:return t.n=10,this.clearData(e.type);case 10:return r({success:!0}),t.a(3,12);case 11:r({success:!1,error:"Unknown message type"});case 12:t.n=14;break;case 13:t.p=13,c=t.v,console.error("Error handling message:",c),r({success:!1,error:c.message});case 14:return t.a(2)}},t,this,[[0,13]])})),function(t,e,n){return w.apply(this,arguments)})},{key:"extractDomain",value:function(t){try{return new URL(t).hostname.replace(/^www\./,"")}catch(t){return"unknown"}}},{key:"saveTimeEntry",value:(b=u(o().m(function t(e){var n,r,i,a,s;return o().w(function(t){for(;;)switch(t.n){case 0:if(e&&!e.isIdle){t.n=1;break}return t.a(2);case 1:if(!((n=Date.now()-e.startTime)<1e3)){t.n=2;break}return t.a(2);case 2:return t.n=3,this.getSettings();case 3:if((r=t.v).trackingEnabled&&!r.privateMode){t.n=4;break}return t.a(2);case 4:return i={domain:e.domain,timeSpent:n,timestamp:e.startTime,date:(new Date).toISOString().split("T")[0]},t.n=5,chrome.storage.local.get(["timeEntries"]);case 5:return a=t.v,(s=a.timeEntries||[]).push(i),t.n=6,chrome.storage.local.set({timeEntries:s});case 6:return t.n=7,this.updateDailyStats(i);case 7:return t.n=8,this.checkTimeLimits(i.domain,i.date);case 8:return t.a(2)}},t,this)})),function(t){return b.apply(this,arguments)})},{key:"updateDailyStats",value:(p=u(o().m(function t(e){var n,r,i,a,s,c;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["dailyStats","categories"]);case 1:return n=t.v,r=n.dailyStats||[],i=n.categories||[],a=e.date,(s=r.find(function(t){return t.date===a}))||(s={date:a,totalTime:0,categories:{},domains:{},productivity:0},r.push(s)),s.domains[e.domain]=(s.domains[e.domain]||0)+e.timeSpent,s.totalTime+=e.timeSpent,(c=this.findCategoryForDomain(e.domain,i))&&(s.categories[c.id]=(s.categories[c.id]||0)+e.timeSpent),s.productivity=this.calculateProductivityScore(s,i),t.n=2,chrome.storage.local.set({dailyStats:r});case 2:return t.a(2)}},t,this)})),function(t){return p.apply(this,arguments)})},{key:"findCategoryForDomain",value:function(t,e){return e.find(function(e){return e.domains.includes(t)})}},{key:"calculateProductivityScore",value:function(t,e){for(var n=0,r=t.totalTime,a=["work","education"],o=0,s=Object.entries(t.categories);o<s.length;o++){var c=i(s[o],2),u=c[0],l=c[1];a.includes(u)&&(n+=l)}return r>0?Math.round(n/r*100):0}},{key:"checkTimeLimits",value:(g=u(o().m(function t(e,n){var r,i,a,s,c,u,l,d,f,h;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["categories","dailyStats","userSettings"]);case 1:if(a=t.v,s=a.categories||[],c=a.dailyStats||[],u=a.userSettings||{},null!==(r=u.notifications)&&void 0!==r&&r.enabled&&null!==(i=u.notifications)&&void 0!==i&&i.timeLimits){t.n=2;break}return t.a(2);case 2:if((l=this.findCategoryForDomain(e,s))&&l.timeLimit){t.n=3;break}return t.a(2);case 3:if(d=c.find(function(t){return t.date===n})){t.n=4;break}return t.a(2);case 4:f=d.categories[l.id]||0,(h=f/l.timeLimit)>=.8&&h<1?this.sendNotification({type:"warning",title:"התראת זמן",message:"הגעת ל-80% מהזמן המוגדר עבור ".concat(l.name)}):h>=1&&this.sendNotification({type:"limit_exceeded",title:"חריגה מהזמן המוגדר",message:"חרגת מהזמן המוגדר עבור ".concat(l.name)});case 5:return t.a(2)}},t,this)})),function(t,e){return g.apply(this,arguments)})},{key:"sendNotification",value:(y=u(o().m(function t(e){return o().w(function(t){for(;;)switch(t.n){case 0:chrome.notifications&&chrome.notifications.create({type:"basic",iconUrl:"assets/icons/icon48.png",title:e.title,message:e.message});case 1:return t.a(2)}},t)})),function(t){return y.apply(this,arguments)})},{key:"startIdleDetection",value:function(){chrome.idle.setDetectionInterval(60*this.idleThreshold)}},{key:"setupPeriodicSave",value:function(){var t=this;chrome.alarms.create("periodicSave",{periodInMinutes:5}),chrome.alarms.onAlarm.addListener(function(e){"periodicSave"===e.name&&t.performPeriodicSave()})}},{key:"performPeriodicSave",value:(v=u(o().m(function t(){var e;return o().w(function(t){for(;;)switch(t.n){case 0:if(!this.currentActiveTab||this.isIdle){t.n=2;break}return e=n({},this.currentActiveTab),t.n=1,this.saveTimeEntry(e);case 1:this.currentActiveTab.startTime=Date.now();case 2:return t.n=3,this.updateWeeklyStats();case 3:return t.n=4,this.cleanOldData();case 4:return t.a(2)}},t,this)})),function(){return v.apply(this,arguments)})},{key:"updateWeeklyStats",value:(m=u(o().m(function t(){var e,n,r,a,s,c,u,l,d,f,h;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["dailyStats","weeklyStats"]);case 1:if(e=t.v,n=e.dailyStats||[],r=e.weeklyStats||[],a=new Date,(s=new Date(a)).setDate(a.getDate()-a.getDay()),s.setHours(0,0,0,0),c=s.toISOString().split("T")[0],0!==(u=n.filter(function(t){var e=new Date(t.date);return e>=s&&e<=a})).length){t.n=2;break}return t.a(2);case 2:return l={weekStart:c,totalTime:0,dailyAverage:0,categories:{},domains:{},productivity:0,trend:"stable"},u.forEach(function(t){l.totalTime+=t.totalTime,Object.entries(t.categories).forEach(function(t){var e=i(t,2),n=e[0],r=e[1];l.categories[n]=(l.categories[n]||0)+r}),Object.entries(t.domains).forEach(function(t){var e=i(t,2),n=e[0],r=e[1];l.domains[n]=(l.domains[n]||0)+r})}),l.dailyAverage=l.totalTime/u.length,l.productivity=u.reduce(function(t,e){return t+e.productivity},0)/u.length,(d=r.find(function(t){var e=new Date(t.weekStart),n=new Date(s);return n.setDate(n.getDate()-7),e.getTime()===n.getTime()}))&&((f=(l.totalTime-d.totalTime)/d.totalTime)>.1?l.trend="up":f<-.1&&(l.trend="down")),(h=r.findIndex(function(t){return t.weekStart===c}))>=0?r[h]=l:r.push(l),t.n=3,chrome.storage.local.set({weeklyStats:r});case 3:return t.a(2)}},t)})),function(){return m.apply(this,arguments)})},{key:"cleanOldData",value:(h=u(o().m(function t(){var e,n,r,i,a,s;return o().w(function(t){for(;;)switch(t.n){case 0:return(e=new Date).setDate(e.getDate()-30),n=e.toISOString().split("T")[0],t.n=1,chrome.storage.local.get(["timeEntries","dailyStats","weeklyStats"]);case 1:return r=t.v,i=(r.timeEntries||[]).filter(function(t){return t.date>=n}),a=(r.dailyStats||[]).filter(function(t){return t.date>=n}),s=(r.weeklyStats||[]).sort(function(t,e){return new Date(e.weekStart)-new Date(t.weekStart)}).slice(0,12),t.n=2,chrome.storage.local.set({timeEntries:i,dailyStats:a,weeklyStats:s});case 2:return t.a(2)}},t)})),function(){return h.apply(this,arguments)})},{key:"getCurrentStats",value:(f=u(o().m(function t(){var e,n,r,i,a;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["dailyStats","categories"]);case 1:return e=t.v,n=e.dailyStats||[],r=e.categories||[],i=(new Date).toISOString().split("T")[0],a=n.find(function(t){return t.date===i}),t.a(2,{today:a||{date:i,totalTime:0,categories:{},domains:{},productivity:0},categories:r,currentTab:this.currentActiveTab,isTracking:!this.isIdle&&null!==this.currentActiveTab})}},t,this)})),function(){return f.apply(this,arguments)})},{key:"getDailyStats",value:(d=u(o().m(function t(e){var n,r;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["dailyStats"]);case 1:return n=t.v,r=n.dailyStats||[],t.a(2,r.find(function(t){return t.date===e})||null)}},t)})),function(t){return d.apply(this,arguments)})},{key:"getSettings",value:(c=u(o().m(function t(){var e;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["userSettings"]);case 1:return e=t.v,t.a(2,e.userSettings||this.getDefaultSettings())}},t,this)})),function(){return c.apply(this,arguments)})},{key:"updateSettings",value:(s=u(o().m(function t(e){var r,i,a;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,chrome.storage.local.get(["userSettings"]);case 1:return r=t.v,i=r.userSettings||this.getDefaultSettings(),a=n(n({},i),e),t.n=2,chrome.storage.local.set({userSettings:a});case 2:e.idleThreshold&&e.idleThreshold!==this.idleThreshold&&(this.idleThreshold=e.idleThreshold,chrome.idle.setDetectionInterval(60*this.idleThreshold));case 3:return t.a(2)}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"toggleTracking",value:(a=u(o().m(function t(){var e;return o().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getSettings();case 1:return(e=t.v).trackingEnabled=!e.trackingEnabled,t.n=2,this.updateSettings(e);case 2:return t.a(2)}},t,this)})),function(){return a.apply(this,arguments)})},{key:"clearData",value:(r=u(o().m(function t(e){var n,r,i,a,s;return o().w(function(t){for(;;)switch(t.n){case 0:s=e,t.n="today"===s?1:"all"===s?4:6;break;case 1:return n=(new Date).toISOString().split("T")[0],t.n=2,chrome.storage.local.get(["timeEntries","dailyStats"]);case 2:return r=t.v,i=(r.timeEntries||[]).filter(function(t){return t.date!==n}),a=(r.dailyStats||[]).filter(function(t){return t.date!==n}),t.n=3,chrome.storage.local.set({timeEntries:i,dailyStats:a});case 3:case 5:return t.a(3,6);case 4:return t.n=5,chrome.storage.local.set({timeEntries:[],dailyStats:[],weeklyStats:[],insights:[]});case 6:return t.a(2)}},t)})),function(t){return r.apply(this,arguments)})}],e&&l(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r,a,s,c,d,f,h,m,v,y,g,p,b,w,S,T,k,D,E,A}())})();